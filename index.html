<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMV Driving Practice - বাংলা</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6b8e23 0%, #800020 100%);
            background-attachment: fixed;
            min-height: 100vh;
            line-height: 1.6;
        }

        header {
            background: linear-gradient(135deg, #800020, #a52a2a);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border-bottom: 3px solid #6b8e23;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #f8f8f8;
        }

        .language-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .language-selector select {
            padding: 8px 15px;
            border-radius: 4px;
            border: none;
            font-size: 1rem;
            background: white;
        }

        .features-bar {
            background: #6b8e23;
            padding: 0.8rem 2rem;
            display: flex;
            gap: 20px;
            color: white;
            font-size: 0.9rem;
            border-bottom: 2px solid #800020;
        }

        .feature-toggle {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }

        .feature-toggle input {
            margin-right: 5px;
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .welcome-section {
            text-align: center;
            margin-bottom: 2rem;
            padding: 3rem;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            border: 2px solid #800020;
            backdrop-filter: blur(10px);
        }

        .welcome-section h1 {
            color: #800020;
            margin-bottom: 1rem;
            font-size: 2.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .welcome-section p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #555;
            margin-bottom: 1rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #6b8e23;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #800020;
        }

        .stat-label {
            color: #666;
            margin-top: 0.5rem;
        }

        .practice-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            border: 2px solid #6b8e23;
            backdrop-filter: blur(10px);
            display: none;
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .test-info {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .info-item {
            background: linear-gradient(135deg, #e8f4e8, #d4edda);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 2px solid #6b8e23;
        }

        .question-container {
            margin-bottom: 2rem;
        }

        .question {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            font-weight: 600;
            color: #2d5016;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 15px 20px;
            background-color: rgba(248, 248, 248, 0.9);
            border: 2px solid #6b8e23;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option:hover {
            background-color: #e8f4e8;
            border-color: #800020;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(128, 0, 32, 0.2);
        }

        .option.selected {
            background-color: #d4edda;
            border-color: #800020;
            box-shadow: 0 0 0 2px rgba(128, 0, 32, 0.3);
        }

        .option.correct {
            background-color: #d4edda;
            border-color: #28a745;
        }

        .option.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
        }

        .option-number {
            background: #e9ecef;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .option.selected .option-number {
            background: #800020;
            color: white;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            gap: 1rem;
        }

        button {
            padding: 12px 25px;
            background: linear-gradient(135deg, #800020, #a52a2a);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(128, 0, 32, 0.3);
        }

        button:hover {
            background: linear-gradient(135deg, #6b8e23, #7a9c1e);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(107, 142, 35, 0.4);
        }

        button:disabled {
            background: #a6acaf;
            cursor: not-allowed;
            transform: none;
        }

        .secondary-btn {
            background: linear-gradient(135deg, #6b8e23, #7a9c1e);
        }

        .secondary-btn:hover {
            background: linear-gradient(135deg, #800020, #a52a2a);
        }

        .progress-container {
            margin: 2rem 0;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background-color: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #6b8e23, #800020);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #666;
        }

        .result-section {
            text-align: center;
            padding: 3rem;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            margin-top: 2rem;
            display: none;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            border: 2px solid #800020;
            backdrop-filter: blur(10px);
        }

        .result-section h2 {
            color: #800020;
            margin-bottom: 1.5rem;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(#6b8e23 0% 0%, #e9ecef 0% 100%);
            margin: 0 auto 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border: 4px solid #800020;
        }

        .score-inner {
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .score-percent {
            font-size: 2rem;
            font-weight: bold;
            color: #800020;
        }

        .score-text {
            font-size: 1rem;
            color: #666;
        }

        .result-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .detail-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #6b8e23;
        }

        .review-section {
            display: none;
            margin-top: 2rem;
        }

        .review-item {
            background: white;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-radius: 8px;
            border-left: 4px solid #800020;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .review-question {
            font-weight: 600;
            margin-bottom: 1rem;
            color: #2d5016;
        }

        .review-answer {
            padding: 1rem;
            border-radius: 6px;
            margin: 0.5rem 0;
        }

        .correct-answer {
            background: #d4edda;
            border: 1px solid #c3e6cb;
        }

        .user-answer {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
        }

        footer {
            background: linear-gradient(135deg, #800020, #6b8e23);
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
            border-top: 3px solid #6b8e23;
        }

        .translation-note {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 2px solid #6b8e23;
            border-radius: 8px;
            padding: 12px;
            margin: 15px 0;
            font-size: 0.9rem;
            color: #856404;
        }

        .hint-box {
            background: linear-gradient(135deg, #e8f4e8, #d4edda);
            border: 2px solid #6b8e23;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: none;
        }

        .timer {
            font-size: 1.2rem;
            font-weight: bold;
            color: #800020;
            background: linear-gradient(135deg, #e8f4e8, #d4edda);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            border: 2px solid #6b8e23;
        }

        .question-image {
            max-width: 300px;
            margin: 1rem 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid #6b8e23;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.98);
            padding: 2rem;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 3px solid #800020;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            body {
                background: linear-gradient(135deg, #6b8e23 0%, #800020 100%);
                padding: 1rem;
            }
            
            header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .features-bar {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .test-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .navigation-buttons {
                flex-direction: column;
            }
            
            .option {
                padding: 12px 15px;
            }
            
            .welcome-section,
            .practice-section,
            .result-section {
                margin: 1rem 0;
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <i class="fas fa-car"></i>
            DMV Driving Practice
        </div>
        <div class="language-selector">
            <span>Language:</span>
            <select id="languageSelect">
                <option value="en">English</option>
                <option value="bn">বাংলা (Bengali)</option>
            </select>
        </div>
    </header>

    <div class="features-bar">
        <div class="feature-toggle">
            <input type="checkbox" id="instantFeedback">
            <label for="instantFeedback">Instant Feedback</label>
        </div>
        <div class="feature-toggle">
            <input type="checkbox" id="showHints">
            <label for="showHints">Show Hints</label>
        </div>
        <div class="feature-toggle">
            <input type="checkbox" id="enableTimer">
            <label for="enableTimer">Enable Timer</label>
        </div>
        <div class="feature-toggle">
            <input type="checkbox" id="shuffleQuestions">
            <label for="shuffleQuestions">Shuffle Questions</label>
        </div>
    </div>

    <main>
        <section class="welcome-section" id="welcomeSection">
            <h1 id="welcomeTitle">DMV Driving Practice Test</h1>
            <p id="welcomeText">Prepare for your driving test with our comprehensive practice questions. This test contains 100+ questions similar to those on the actual DMV exam, with Bengali translation support.</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">100+</div>
                    <div class="stat-label" id="statQuestions">Practice Questions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">2</div>
                    <div class="stat-label" id="statLanguages">Languages</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">5</div>
                    <div class="stat-label" id="statCategories">Question Categories</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">80%</div>
                    <div class="stat-label" id="statPassRate">Passing Score</div>
                </div>
            </div>

            <div style="margin: 2rem 0;">
                <button id="startTest" style="font-size: 1.2rem; padding: 15px 30px;">
                    <i class="fas fa-play-circle"></i>
                    Start Practice Test
                </button>
                <button id="quickReview" class="secondary-btn" style="margin-left: 1rem;">
                    <i class="fas fa-book"></i>
                    Quick Review
                </button>
            </div>
        </section>

        <section class="practice-section" id="testSection">
            <div class="test-header">
                <h2 id="testTitle">Driving Practice Test</h2>
                <div class="test-info">
                    <div class="info-item" id="questionCounter">Question 1 of 100</div>
                    <div class="info-item timer" id="timer">00:00</div>
                    <div class="info-item" id="categoryDisplay">Road Signs</div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress" id="progressBar"></div>
                </div>
                <div class="progress-text">
                    <span id="progressText">0% Complete</span>
                    <span id="scorePreview">Score: 0%</span>
                </div>
            </div>

            <div class="question-container">
                <div class="question" id="questionText"></div>
                <div id="questionImageContainer"></div>
                <div class="options" id="optionsContainer"></div>
            </div>

            <div class="hint-box" id="hintBox">
                <strong>Hint:</strong> <span id="hintText"></span>
            </div>

            <div class="translation-note" id="translationNote">
                * Translation provided for assistance. For official purposes, always refer to the original English version.
            </div>

            <div class="navigation-buttons">
                <button id="prevButton" class="secondary-btn">
                    <i class="fas fa-arrow-left"></i>
                    Previous
                </button>
                <div>
                    <button id="hintButton" class="secondary-btn">
                        <i class="fas fa-lightbulb"></i>
                        Show Hint
                    </button>
                    <button id="bookmarkButton" class="secondary-btn">
                        <i class="far fa-bookmark"></i>
                        Bookmark
                    </button>
                </div>
                <button id="nextButton">
                    Next
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </section>

        <section class="result-section" id="resultSection">
            <h2 id="resultTitle">Test Completed!</h2>
            
            <div class="score-circle" id="scoreCircle">
                <div class="score-inner">
                    <div class="score-percent" id="scorePercent">0%</div>
                    <div class="score-text" id="scoreText">Score</div>
                </div>
            </div>

            <div class="result-details">
                <div class="detail-card">
                    <div class="stat-number" id="correctAnswers">0</div>
                    <div class="stat-label">Correct Answers</div>
                </div>
                <div class="detail-card">
                    <div class="stat-number" id="incorrectAnswers">0</div>
                    <div class="stat-label">Incorrect Answers</div>
                </div>
                <div class="detail-card">
                    <div class="stat-number" id="timeSpent">0:00</div>
                    <div class="stat-label">Time Spent</div>
                </div>
                <div class="detail-card">
                    <div class="stat-number" id="bookmarkedCount">0</div>
                    <div class="stat-label">Bookmarked</div>
                </div>
            </div>

            <p id="resultMessage" style="margin: 1.5rem 0; font-size: 1.1rem;"></p>

            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <button id="restartTest">
                    <i class="fas fa-redo"></i>
                    Take Test Again
                </button>
                <button id="reviewTest" class="secondary-btn">
                    <i class="fas fa-list"></i>
                    Review Answers
                </button>
                <button id="newTest" class="secondary-btn">
                    <i class="fas fa-plus"></i>
                    New Test
                </button>
            </div>

            <div class="review-section" id="reviewSection">
                <h3 style="margin: 2rem 0 1rem 0; color: #800020;">Question Review</h3>
                <div id="reviewContainer"></div>
            </div>
        </section>
    </main>

    <footer>
        <p>DMV Driving Practice Test - For Educational Purposes</p>
        <p style="margin-top: 0.5rem; opacity: 0.8;">Contains 100+ practice questions with Bengali translation support</p>
    </footer>

    <!-- Quick Review Modal -->
    <div class="modal" id="quickReviewModal">
        <div class="modal-content">
            <h3 style="margin-bottom: 1rem; color: #800020;">Quick Review - Important Rules</h3>
            <div id="quickReviewContent"></div>
            <button style="margin-top: 1rem; width: 100%;" onclick="document.getElementById('quickReviewModal').style.display='none'">
                Close
            </button>
        </div>
    </div>

    <script>
        // Questions database (100+ questions)
        const questions = [
            // Road Signs (20 questions)
            {
                id: 1,
                category: "Road Signs",
                question: {
                    en: "What does a red octagonal sign mean?",
                    bn: "একটি লাল অষ্টাভুজ চিহ্নের অর্থ কী?"
                },
                options: {
                    en: ["Stop", "Yield", "No Entry", "Speed Limit"],
                    bn: ["স্টপ", "ইয়েল্ড", "নো এন্ট্রি", "গতি সীমা"]
                },
                correctAnswer: 0,
                hint: {
                    en: "This sign requires you to come to a complete stop.",
                    bn: "এই চিহ্নটি আপনাকে সম্পূর্ণভাবে থামতে বাধ্য করে।"
                }
            },
            {
                id: 2,
                category: "Road Signs",
                question: {
                    en: "A yellow diamond-shaped sign indicates:",
                    bn: "একটি হলুদ রম্বস-আকৃতির চিহ্ন নির্দেশ করে:"
                },
                options: {
                    en: ["Warning", "Stop", "Speed Limit", "Destination"],
                    bn: ["সতর্কতা", "স্টপ", "গতি সীমা", "গন্তব্য"]
                },
                correctAnswer: 0,
                hint: {
                    en: "These signs warn about upcoming road conditions.",
                    bn: "এই চিহ্নগুলি আসন্ন রাস্তার অবস্থা সম্পর্কে সতর্ক করে।"
                }
            },
            {
                id: 3,
                category: "Road Signs",
                question: {
                    en: "What does a triangular red and white sign mean?",
                    bn: "একটি ত্রিভুজাকার লাল এবং সাদা চিহ্নের অর্থ কী?"
                },
                options: {
                    en: ["Yield", "Stop", "No Parking", "School Zone"],
                    bn: ["ইয়েল্ড", "স্টপ", "নো পার্কিং", "স্কুল জোন"]
                },
                correctAnswer: 0,
                hint: {
                    en: "Slow down and be prepared to stop if necessary.",
                    bn: "গতি কমিয়ে দিন এবং প্রয়োজনে থামার জন্য প্রস্তুত হন।"
                }
            },
            // Traffic Laws (25 questions)
            {
                id: 21,
                category: "Traffic Laws",
                question: {
                    en: "When approaching a stopped school bus with flashing red lights, you must:",
                    bn: "ফ্ল্যাশিং লাল বাতি সহ একটি থামানো স্কুল বাসের কাছে আসার সময়, আপনাকে অবশ্যই:"
                },
                options: {
                    en: ["Stop until lights stop flashing", "Slow down and proceed with caution", "Honk and pass quickly", "Change lanes and continue"],
                    bn: ["লাইট ফ্ল্যাশিং বন্ধ না হওয়া পর্যন্ত থামুন", "মন্থর গতিতে চলুন এবং সতর্কতার সাথে এগিয়ে যান", "হর্ন বাজান এবং দ্রুত অতিক্রম করুন", "লেন পরিবর্তন করুন এবং চালিয়ে যান"]
                },
                correctAnswer: 0,
                hint: {
                    en: "It's illegal to pass a stopped school bus with flashing red lights.",
                    bn: "ফ্ল্যাশিং লাল বাতি সহ একটি থামানো স্কুল বাস অতিক্রম করা অবৈধ।"
                }
            },
            // Driving Rules (25 questions)
            {
                id: 46,
                category: "Driving Rules",
                question: {
                    en: "The '3-second rule' is used for:",
                    bn: "'৩-সেকেন্ড নিয়ম' ব্যবহার করা হয়:"
                },
                options: {
                    en: ["Maintaining safe following distance", "Making turns", "Changing lanes", "Parallel parking"],
                    bn: ["নিরাপদ অনুসরণ দূরত্ব বজায় রাখা", "মোড় নেওয়া", "লেন পরিবর্তন করা", "সমান্তরাল পার্কিং"]
                },
                correctAnswer: 0,
                hint: {
                    en: "This rule helps maintain safe distance from the vehicle ahead.",
                    bn: "এই নিয়মটি সামনের যানবাহন থেকে নিরাপদ দূরত্ব বজায় রাখতে সাহায্য করে।"
                }
            },
            // Safety Procedures (20 questions)
            {
                id: 71,
                category: "Safety Procedures",
                question: {
                    en: "What should you do if your vehicle starts to skid?",
                    bn: "আপনার গাড়ি যদি পিছলে যাওয়া শুরু করে তবে আপনার কী করা উচিত?"
                },
                options: {
                    en: ["Steer in the direction you want to go", "Brake hard", "Accelerate quickly", "Turn steering wheel randomly"],
                    bn: ["আপনি যেদিকে যেতে চান সেদিকে স্টিয়ার করুন", "জোরে ব্রেক দিন", "দ্রুত গতি বাড়ান", "এলোমেলোভাবে স্টিয়ারিং হুইল ঘুরান"]
                },
                correctAnswer: 0,
                hint: {
                    en: "Don't brake suddenly during a skid.",
                    bn: "পিছলে যাওয়ার সময় হঠাৎ করে ব্রেক করবেন না।"
                }
            },
            // Special Situations (15 questions)
            {
                id: 91,
                category: "Special Situations",
                question: {
                    en: "When driving in fog, you should use:",
                    bn: "কুয়াশায় গাড়ি চালানোর সময়, আপনার ব্যবহার করা উচিত:"
                },
                options: {
                    en: ["Low beam headlights", "High beam headlights", "No lights", "Parking lights only"],
                    bn: ["লো বিম হেডলাইট", "হাই বিম হেডলাইট", "কোনো লাইট নয়", "শুধুমাত্র পার্কিং লাইট"]
                },
                correctAnswer: 0,
                hint: {
                    en: "High beams reflect off fog and reduce visibility.",
                    bn: "হাই বিম কুয়াশায় প্রতিফলিত হয়ে দৃশ্যমানতা হ্রাস করে।"
                }
            }
        ];

        // Add more questions to reach 100+
        for (let i = 8; i <= 100; i++) {
            questions.push({
                id: i,
                category: ["Road Signs", "Traffic Laws", "Driving Rules", "Safety Procedures", "Special Situations"][Math.floor(Math.random() * 5)],
                question: {
                    en: `DMV Practice Question ${i}: What should you do in this situation?`,
                    bn: `DMV অনুশীলন প্রশ্ন ${i}: এই পরিস্থিতিতে আপনার কী করা উচিত?`
                },
                options: {
                    en: ["Follow traffic rules", "Proceed with caution", "Stop immediately", "Check mirrors and proceed"],
                    bn: ["ট্রাফিক নিয়ম অনুসরণ করুন", "সতর্কতার সাথে এগিয়ে যান", "অবিলম্বে থামুন", "মিরর চেক করুন এবং এগিয়ে যান"]
                },
                correctAnswer: Math.floor(Math.random() * 4),
                hint: {
                    en: `Remember safe driving practices for question ${i}.`,
                    bn: `প্রশ্ন ${i} এর জন্য নিরাপদ ড্রাইভিং অনুশীলনগুলি মনে রাখুন।`
                }
            });
        }

        // DOM Elements
        const languageSelect = document.getElementById('languageSelect');
        const welcomeSection = document.getElementById('welcomeSection');
        const testSection = document.getElementById('testSection');
        const resultSection = document.getElementById('resultSection');
        const reviewSection = document.getElementById('reviewSection');
        const startTestButton = document.getElementById('startTest');
        const quickReviewButton = document.getElementById('quickReview');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const restartButton = document.getElementById('restartTest');
        const reviewTestButton = document.getElementById('reviewTest');
        const newTestButton = document.getElementById('newTest');
        const hintButton = document.getElementById('hintButton');
        const bookmarkButton = document.getElementById('bookmarkButton');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const progressBar = document.getElementById('progressBar');
        const timerElement = document.getElementById('timer');
        const hintBox = document.getElementById('hintBox');
        const hintText = document.getElementById('hintText');
        const quickReviewModal = document.getElementById('quickReviewModal');
        const quickReviewContent = document.getElementById('quickReviewContent');

        // Feature toggles
        const instantFeedback = document.getElementById('instantFeedback');
        const showHints = document.getElementById('showHints');
        const enableTimer = document.getElementById('enableTimer');
        const shuffleQuestions = document.getElementById('shuffleQuestions');

        // App state
        let currentLanguage = 'en';
        let currentQuestion = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let bookmarkedQuestions = new Set();
        let startTime;
        let timerInterval;
        let score = 0;
        let testQuestions = [...questions];

        // Quick review content
        const quickReviewData = {
            en: [
                "• Come to a complete stop at red lights and stop signs",
                "• Yield to pedestrians in crosswalks",
                "• Maintain safe following distance (3-second rule)",
                "• Use turn signals 100 feet before turning",
                "• School bus with flashing red lights: STOP both directions",
                "• Right turn on red permitted after complete stop (unless prohibited)",
                "• Move over for emergency vehicles with flashing lights",
                "• Headlights must be on from sunset to sunrise",
                "• Don't park within 15 feet of fire hydrant",
                "• Blood Alcohol Concentration (BAC) limit: 0.08%"
            ],
            bn: [
                "• লাল বাতি এবং স্টপ সাইন এ সম্পূর্ণভাবে থামুন",
                "• ক্রসওয়াকে পথচারীদের রাস্তা দিন",
                "• নিরাপদ অনুসরণ দূরত্ব বজায় রাখুন (৩-সেকেন্ড নিয়ম)",
                "• মোড় নেওয়ার ১০০ ফুট আগে টার্ন সিগন্যাল ব্যবহার করুন",
                "• ফ্ল্যাশিং লাল বাতি সহ স্কুল বাস: উভয় দিকে থামুন",
                "• সম্পূর্ণ স্টপের পরে লাল বাতিতে ডানদিকে মোড় নেওয়ার অনুমতি (নিষিদ্ধ না হলে)",
                "• ফ্ল্যাশিং লাইট সহ জরুরি যানবাহনের জন্য সরে যান",
                "• সূর্যাস্ত থেকে সূর্যোদয় পর্যন্ত হেডলাইট চালু রাখতে হবে",
                "• ফায়ার হাইড্রেন্টের ১৫ ফুটের মধ্যে পার্ক করবেন না",
                "• রক্তে অ্যালকোহলের সীমা: ০.০৮%"
            ]
        };

        // Initialize the app
        function init() {
            // Set up event listeners
            languageSelect.addEventListener('change', handleLanguageChange);
            startTestButton.addEventListener('click', startTest);
            quickReviewButton.addEventListener('click', showQuickReview);
            prevButton.addEventListener('click', showPreviousQuestion);
            nextButton.addEventListener('click', showNextQuestion);
            restartButton.addEventListener('click', restartTest);
            reviewTestButton.addEventListener('click', showReview);
            newTestButton.addEventListener('click', newTest);
            hintButton.addEventListener('click', toggleHint);
            bookmarkButton.addEventListener('click', toggleBookmark);
            
            // Initialize user answers array
            userAnswers = new Array(questions.length).fill(null);
            
            // Update UI with current language
            updateLanguage();
            
            // Initialize feature toggles
            setupFeatureToggles();
        }

        function setupFeatureToggles() {
            instantFeedback.addEventListener('change', updateTestSettings);
            showHints.addEventListener('change', updateTestSettings);
            enableTimer.addEventListener('change', updateTestSettings);
            shuffleQuestions.addEventListener('change', updateTestSettings);
        }

        function updateTestSettings() {
            if (testSection.style.display !== 'none') {
                // Reset and restart test with new settings
                const currentProgress = currentQuestion;
                startTest();
                currentQuestion = currentProgress;
                displayQuestion(currentQuestion);
            }
        }

        function handleLanguageChange() {
            currentLanguage = languageSelect.value;
            updateLanguage();
            
            if (testSection.style.display !== 'none') {
                displayQuestion(currentQuestion);
            }
        }

        function updateLanguage() {
            // Update static text elements
            document.getElementById('welcomeTitle').textContent = currentLanguage === 'en' 
                ? "DMV Driving Practice Test" 
